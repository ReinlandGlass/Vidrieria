<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tienda de Artesan√≠a</title>

<style>
body{font-family:Arial;margin:0;background:#f4f4f4}
header{background:#111;color:#fff;padding:15px;text-align:center}
.container{max-width:1200px;margin:auto;padding:15px}
.filter{margin-bottom:15px}
.products{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:15px}
.card{background:#fff;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.15);overflow:hidden;display:flex;flex-direction:column}
.card img{height:130px;width:100%;object-fit:contain;display:block;margin:auto;}
.card-body{padding:12px;display:flex;flex-direction:column;height:100%}
.price{font-weight:bold;color:red;}
.controls{margin-top:auto}
.controls input{width:60px}
button{padding:8px;border:none;border-radius:6px;background:red;color:#fff;font-weight:bold;cursor:pointer}
button:hover{opacity:.9}

.cart{max-width:600px;margin-top:25px;background:#fff;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,.15)}
.cart-item{border-bottom:1px solid #ddd;padding:6px 0;font-size:14px;display:flex;justify-content:space-between;align-items:center}
.remove{background:#c0392b;padding:4px 8px;font-size:12px}
.total{font-size:18px;font-weight:bold;margin-top:10px}
.form-group{margin-top:10px}
.form-group input,.form-group textarea{width:100%;padding:8px;border-radius:6px;border:1px solid #ccc}
.checkout{background:#128c7e;width:100%;margin-top:10px}
.qr{text-align:center;margin-top:15px;display:none}
.qr img{width:200px}
h1, h2, h3, h4, h5, h6{
	margin: 0.3em 0;
	line-height: 1.2;
}



#cartToast{
	position:fixed;
	top:50%;
	left:50%;
	transform:translate(-50%,-50%);
	color:#128c7e;
	font-size:20px;
	font-weight:bold;
	background:rgba(255,255,255,.9);
	padding:12px 20px;
	border-radius:10px;
	box-shadow:0 4px 10px rgba(0,0,0,.15);
	opacity:0;
	pointer-events:none;
	animation:toastFade 1s ease forwards;
	z-index:9999;
}

@keyframes toastFade{
	0%{opacity:0;transform:translate(-50%,-60%)}
	20%{opacity:1;transform:translate(-50%,-50%)}
	80%{opacity:1}
	100%{opacity:0}
}


#floatingCart {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 60px;
  height: 60px;
  background: red;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  cursor: pointer;
  box-shadow: 0 8px 20px rgba(0,0,0,0.3);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  z-index: 9999;
}

#floatingCart:hover {
  transform: scale(1.1);
  box-shadow: 0 12px 25px rgba(0,0,0,0.4);
}

/* ---- Just for demo spacing ---- */
.section {
  height: 900px;
  padding: 40px;
}
</style>
</head>

<body>

<header>
	<img style="height:30px;" src="logo.svg"></img>
	<h2>Cat√°logo de Artesan√≠a</h2>
	<p>Compra r√°pida por WhatsApp</p>
</header>

<div class="container">

	<div class="filter">
		<select id="categoryFilter" onchange="renderProducts()">
			<option value="all">Todas las categor√≠as</option>
		</select>
	</div>

	<div class="products" id="productList"></div>

	<div class="cart">
		<h2 id="cartTitle">Carrito</h2>
		<div id="cartItems"></div>
		<div class="total" id="totalPrice">Total: 0</div>

		<div class="form-group">
			<input id="name" placeholder="Nombre">
		</div>
		<div class="form-group">
			<textarea id="address" placeholder="Direcci√≥n de env√≠o"></textarea>
		</div>
		
		<br>
		<div style="font-size:10pt;color:grey;">
			<b style="color:black;">Transferencias</b>
			<p>Banco Continental (Alias): David Hildebrand, RUC 3262453-0, CI 3262453, Cel 0973541497</p>
			<p>Coop Credit&Union: 48458 David J Hildebrand (Aluminio)</p>
			<p>Coop Sommerfeld: 272 David JD Hildebrand</p>
		</div>

		<button class="checkout" onclick="checkout()">Checkout por WhatsApp</button>
		
		<br>
		<div style="font-size:10pt;color:grey;">*Env√≠a el comprobante de la transferencia para finalizar su pedido</div>
		<br>
		<br>

		<div class="qr" id="qrBox">
			<p>Escane√° para enviar el pedido</p>
			<img id="qrImg">
		</div>
	</div>

</div>

<div id="floatingCart" onclick="goToCart()">üõí</div>

<script>

function goToCart() {
  document.getElementById("cartTitle")
    .scrollIntoView({ behavior: "smooth" });
}

var products=[
	{id:1,productname:"Rompe Cabeza Barco",price:30,category:"Barcos",size:"15x5x15"},
	{id:2,productname:"Rompe Cabeza Tractor",price:90,category:"Veh√≠culos,M√°quinas",size:"15x10x10"},
	{id:3,productname:"Rompe Cabeza Avioneta WW2",price:10,category:"Aviones",size:"10x10x5"},
	{id:4,productname:"Rompe Cabeza Avion WW1",price:30,category:"Aviones",size:"20x20x10"},
	{id:5,productname:"Rompe Cabeza Ford A",price:60,category:"Veh√≠culos",size:"25x10x10"},
	{id:6,productname:"Rompe Cabeza Avion Cessna",price:60,category:"Aviones",size:"30x40x10"},
	{id:7,productname:"Rompe Cabeza Autito",price:30,category:"Veh√≠culos",size:"7x4x5"},
	{id:8,productname:"Rompe Cabeza Vaca 3D",price:90,category:"Animales",size:"15x5x10"},
	{id:9,productname:"Rompe Cabeza Picadora",price:70,category:"M√°quinas,Veh√≠culos",size:"20x12x10"},
	{id:10,productname:"Rompe Cabeza Cosechadora",price:130,category:"M√°quinas,Veh√≠culos",size:"20x25x15"},
	{title:"Compra Mayorista!",color:"red",text:"Cada Compra de 500 Mil incluye 10% de Descuento!",category:"ad"},
	{id:11,productname:"Rompe Cabeza Helicoptero",price:90,category:"Aviones",size:"25x25x10"},
	{id:12,productname:"Rompe Cabeza Scania",price:90,category:"Veh√≠culos,M√°quinas",size:"35x10x10"},
	{id:13,productname:"Rompe Cabeza Scania Grande",price:180,category:"Veh√≠culos,M√°quinas",size:"70x20x20"},
	{id:14,productname:"Rompe Cabeza Caterpillar",price:70,category:"M√°quinas,Veh√≠culos",size:"20x10x10"},
	{id:15,productname:"Rompe Cabeza Barco",price:80,category:"Barcos",size:"30x10x15"},
	{id:16,productname:"Rompe Cabeza Caballo",price:90,category:"Animales",size:"25x10x25"},
	{id:17,productname:"Rompe Cabeza Mini Helicoptero",price:15,category:"Aviones",size:"15x10x5"},
	{id:18,productname:"Rompe Cabeza Helicoptero",price:40,category:"Aviones",size:"30x30x15"},
	{id:19,productname:"Rompe Cabeza Conejo",price:20,category:"Animales,Cajita",size:"15x7x10"},
	{id:20,productname:"Rompe Cabeza Canasta Bicicleta",price:40,category:"Cajita,Veh√≠culos",size:"25x15x20"},
	{id:21,productname:"Calendario Rotativo",price:100,category:"Armados,Calendarios",size:"18x8x18"},
	{id:22,productname:"Figura Tematica Pescador",price:40,category:"Armados",size:"20x12x10"},
	{id:23,productname:"Figura Tematica Cazador",price:40,category:"Armados",size:"20x12x10"},
	{id:24,productname:"Rompe Cabeza Saegen",price:30,category:"Armados",size:"20x10"},
	{id:25,productname:"Rompe Cabeza Sopa Animales",price:35,category:"Armados,Animales",size:"20x30"},
	{id:26,productname:"Rompe Cabeza Dreieck",price:20,category:"Armados",size:"20x10"},
	{id:27,productname:"Juego Futbol Magnetico",price:250,category:"Armados,Juegos",size:"30x30x10"},
	{title:"Env√≠os a Todo Paraguay!",color:"green",text:"Te Envi√°mos tu Pedido por Transportadora!",category:"ad"},
	{id:28,productname:"Marco para Fotos Vertical",price:50,category:"Marcos,Armados",size:"16x20"},
	{id:29,productname:"Marco para Fotos Horizontal",price:50,category:"Marcos,Armados",size:"22x16"},
	{id:30,productname:"Canasta Pascua CAJ-48003",price:150,category:"Pascua,Armados,Cajita",size:"20x20x40"},
	{id:31,productname:"Canasta Pascua CAJ-48001",price:100,category:"Armados,Cajita,Pascua",size:"20x20x40"},
	{id:32,productname:"Canasta Pascua CAJ-47001",price:80,category:"Armados,Cajita,Pascua",size:"30x18x10"},
	{id:33,productname:"Canasta Pascua CAJ-37001",price:50,category:"Pascua,Armados,Cajita",size:"20x10x25"},
	{id:34,productname:"Canasta Pascua CAJ-37002",price:50,category:"Armados,Cajita,Pascua",size:"20x3x25"},
	{id:35,productname:"Cajita MDF",price:50,category:"Cajita,Armados",size:"15x15x6"},
	{id:36,productname:"Cajita MDF",price:40,category:"Cajita,Armados",size:"10x11x5"},
	{id:37,productname:"Cajita MDF",price:60,category:"Cajita,Armados",size:"19x19x7"},
	{id:38,productname:"Cajita MDF",price:60,category:"Cajita,Armados",size:"19x19x4"},
	{id:39,productname:"Juego Chess y Dama",price:140,category:"Juegos,Armados",size:"25x15x5"},
	{id:40,productname:"Juego Chess y Dama",price:140,category:"Juegos,Armados",size:"25x15x5"},
	{id:41,productname:"Iman MDF",price:10,category:"Imanes,Armados",size:"7"},
	{id:42,productname:"Iman Acrilico",price:20,category:"Imanes,Armados",size:"7"},
	{id:43,productname:"Llavero MDF",price:10,category:"Llaveros,Armados",size:"7"},
	{id:44,productname:"Llavero Acrilico",price:20,category:"Llaveros,Armados",size:"7"},
	{id:45,productname:"Llavero Acrilico Paraguay",price:20,category:"Llaveros,Armados",size:"7"},
	{id:46,productname:"Iman Acrilico Paraguay",price:20,category:"Imanes,Armados",size:"7"},
	{id:47,productname:"Vaca MDF con Logo Personalizable",price:30,category:"Armados,Personalizable",size:"15x5x10"},
	{id:48,productname:"Obseqio Acrilico Personalizable",price:60,category:"Personalizable,Armado,Obseqio",size:"15x15"},
	{id:49,productname:"Obseqio Acrilico Con Color Personalizable",price:80,category:"Obseqio,Personalizable,Armado",size:"15x15"},
	{id:50,productname:"Obseqio MDF cod.50 Personalizable",price:60,category:"Obseqio,Personalizable,Armado",size:"20x20"},
	{id:51,productname:"Obseqio MDF cod.51 Personalizable",price:60,category:"Personalizable,Armado,Obseqio",size:"15x15"},
	{id:52,productname:"Obseqio MDF cod.52 Personalizable",price:80,category:"Personalizable,Armado,Obseqio",size:"15x15"},
	{id:53,productname:"Obseqio Acrilico Con Color Personalizable",price:80,category:"Personalizable,Armado,Obseqio",size:"15x15"},
	{id:54,productname:"Obseqio 2Corazones Personalizable",price:50,category:"Personalizable,Armado,Obseqio",size:"20x13"},
	{id:55,productname:"Obseqio cod.55 Personalizable",price:50,category:"Personalizable,Armado,Obseqio",size:"20x15"},
	{id:56,productname:"Obseqio Cruz de Jesus Personalizable",price:50,category:"Personalizable,Armado,Obseqio",size:"12x20"},
	{id:57,productname:"Obseqio Flor cod.57 Personalizable",price:50,category:"Personalizable,Armado,Obseqio",size:"10x20"},
	{id:58,productname:"Obseqio Pareja Danzando Personalizable",price:50,category:"Personalizable,Armado,Obseqio",size:"15x15"},
	{id:59,productname:"Obseqio Zapatilla Personalizable",price:50,category:"Personalizable,Armado,Obseqio",size:"15x20"},
	{id:60,productname:"Obseqio MDF cod.60 Personalizable",price:100,category:"Personalizable,Armado,Obseqio",size:"30x23"},
	{id:61,productname:"Obseqio Cruz Jesus cod.61",price:30,category:"Personalizable,Armado,Obseqio",size:"15x15"},
	{id:62,productname:"Obseqio Cruz Jesus cod.62",price:60,category:"Personalizable,Armado,Obseqio",size:"23x15"},
	{id:63,productname:"Obseqio Cruz Jesus cod.63",price:60,category:"Personalizable,Armado,Obseqio",size:"30x23"},
];

var cart=[];
var phone="595972541497"; // TU N√öMERO

function initCategories(){
	let cats=[...new Set(products.map(p=>p.category.split(',')[0]))];
	let sel=document.getElementById("categoryFilter");
	cats.forEach(c => c !== "ad" && (sel.innerHTML += `<option value="${c}">${c}</option>`));
}

function renderProducts(){
	let cat=document.getElementById("categoryFilter").value;
	let html="";
	products.filter(p=>cat==="all"||p.category.includes(cat)||p.category==="ad")
	.forEach(p=>{
		if(p.category==="ad"){
		html+=`
			<div class="card" style="background-color:${p.color};color:white;">
				<div class="card-body">
					<h2>${p.title}</h2>
					<h4>${p.text}</h4>
				</div>
			</div>`;
		}else{
		var assemblyoption='';
		if(!p.category.includes('Armado')){assemblyoption=`<label style="font-size:10pt;">
					  <input type="checkbox" id="a${p.id}" style="margin:0;vertical-align:middle;">
					  Armado +Gs ${formatThousands(p.price)},000
					</label>`;}
		html+=`
		<div class="card">
			<img src="comprarapida/${p.id}.jpg">
			<div class="card-body">
				<h4>${p.productname}</h4>
				<div style="font-size:10pt;color:grey;">${p.size}cm</div>
				<div class="price">Gs <a style="font-size:18pt;">${formatThousands(p.price)}</a>,000</div>
				<div class="controls">
					Cant <input type="number" value="1" id="q${p.id}">
					<br>
					${assemblyoption}
					<br><br>
					<button onclick="addToCart(${p.id})">Agregar</button>
				</div>
			</div>
		</div>`;
		}
	});
	document.getElementById("productList").innerHTML=html;
}

function addToCart(id){
	let qty=parseInt(document.getElementById("q"+id).value);

	// ‚ùó remove / ignore if qty <= 0
	if(qty<=0) return;

	let p=products.find(x=>x.id===id);
	let asm=false;
	try{asm=document.getElementById("a"+id).checked;}catch(e){}
	let unit=asm?p.price*2:p.price;

	cart.push({
		id:p.id,
		name:p.productname,
		qty:qty,
		asm:asm,
		total:unit*qty
	});
	renderCart();
	showAddedToast(); // üëà animation
}

function removeItem(index){
	cart.splice(index,1);
	renderCart();
}

function renderCart(){
	let html="",total=0;

	cart.forEach((c,i)=>{
		total+=c.total;
		html+=`
		<div class="cart-item">
			<span>${c.qty}x <img style="height:20px;" src="comprarapida/${c.id}.jpg"></img> ${c.name} ${c.asm?"(Armado)":""} = ${formatThousands(c.total)},000</span>
			<button class="remove" onclick="removeItem(${i})">‚úï</button>
		</div>`;
	});
	var discount=Math.floor(-0.1*total);
	if(Math.abs(discount)>49.9){
	total+=discount;
		html+=`
		<div class="cart-item">
			<span>descuento mayorista ${formatThousands(discount)},000</span>
		</div>`;
	}

	document.getElementById("cartItems").innerHTML=html||"<i>Carrito vac√≠o</i>";
	document.getElementById("totalPrice").innerText="Total: "+formatThousands(total)+",000";
}

function checkout(){
	if(!cart.length) return alert("Carrito vac√≠o");

	let msg="Pedido:%0A";
	cart.forEach(c=>{
		msg+=`${c.qty}x ${c.name} ${c.asm?"(Armado)":""} = ${formatThousands(c.total)},000%0A`;
	});
	//DISCOUNT CODE IS COPY FROM renderCart function
	var total=cart.reduce((s,c)=>s+c.total,0);
	var discount=Math.floor(-0.1*total);
	if(Math.abs(discount)>49.9){
	total+=discount;
		msg+=`descuento mayorista ${formatThousands(discount)},000%0A`;
	}
	/////////
	msg+=`%0ATotal: ${formatThousands(total)},000%0A`;
	msg+=`Nombre: ${document.getElementById('name').value}%0ADirecci√≥n: ${document.getElementById('address').value}`;

	let url=`https://wa.me/${phone}?text=${msg}`;
	window.open(url,"_blank");

	/*document.getElementById("qrImg").src=
	`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(url)}`;
	document.getElementById("qrBox").style.display="block";*/
}

function showAddedToast(){
	let toast=document.createElement("div");
	toast.id="cartToast";
	toast.innerText="Agregado al carrito..";
	document.body.appendChild(toast);

	setTimeout(()=>toast.remove(),1000);
}

function formatThousands(n){
  return Number(n).toLocaleString("en-US");
}



initCategories();
renderProducts();
</script>

</body>
</html>
